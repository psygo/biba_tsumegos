%-----------------------------------------------------------
% Fonts

\usepackage[T1]{fontenc}
\usepackage[default]{fontsetup}
\newfontfamily\ncm{NewCM10-Book.otf}
\usepackage{fontspec}
% From [this comment](https://www.reddit.com/r/identifythisfont/comments/1fiahvg/comment/lngfilr/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button)
\setmainfont{Adobe Garamond Pro}

%-----------------------------------------------------------
% Language and Hyphenation

\usepackage[portuguese]{babel}
\usepackage{microtype}
\usepackage{hyphenat}
\hyphenation{pa-ra}
\hyphenation{Bran-co}
\hyphenation{bran-ca}
\hyphenation{Pre-to}
\hyphenation{cri-ar}
\hyphenation{mor-ta}
\hyphenation{quan-do}
\hyphenation{for-ça}
\hyphenation{o-lho}
\hyphenation{mes-mo}
\hyphenation{can-to}
\hyphenation{po-de}
\hyphenation{as-sim}
\hyphenation{e-xer-cí-cios}
\hyphenation{al-go}
\hyphenation{quan-to}

%-----------------------------------------------------------
% URLs

\usepackage[%
  colorlinks  = true,
  allcolors   = black,
  pdfsubject  = {Go;\ Baduk;\ Weiqi},
  pdftitle    = {Técnicas\ de\ Go\ ---\ Volume I\ ---\ Captura\ e\ Vida\ ou\ Morte},
  pdfauthor   = {Philippe\ Fanaro},
  pdfkeywords = {Go;\ Baduk;\ Weiqi;\ Tsumegos},
  pdfproducer = {LaTeX},
  pdfcreator  = {pdflatex;\ bibtex},
  bookmarksnumbered,
]{hyperref}
\usepackage{xurl}

%-----------------------------------------------------------
% TOC

\usepackage{tocloft}
\renewcommand\cftchapfont{\mdseries}
\renewcommand\cftchappagefont{\mdseries}
\renewcommand{\cfttoctitlefont}{\bfseries\huge}
\setlength{\cftbeforepartskip}{15pt}
\setlength{\cftbeforetoctitleskip}{-25pt}
\setlength{\cftaftertoctitleskip}{12.5pt}

\usepackage[nottoc,numbib]{tocbibind}
\addto\captionsportuguese{
  \renewcommand{\contentsname}{Índice}
}

%-----------------------------------------------------------
% Chapter and Part Titles

\usepackage{titlesec}
\titleformat{\chapter}[display]
            {\normalfont\huge\bfseries}
            {\thechapter}
            {20pt}
            {\huge}
\titlespacing*{\chapter}
              {0pt}
              {-30pt}
              {20pt}

\renewcommand{\chaptermark}[1]{%
  \markboth{\thechapter.\ #1}{}}
\renewcommand{\partname}{}

% From [this question](https://tex.stackexchange.com/q/726389/64441)
\usepackage{xpatch}
\AtBeginDocument{\xpatchcmd{\NR@part}{\partname\nobreakspace}{}{}{}} % Removing "Part" from part titles
\pagestyle{headings} % Apply the change
\makeatother

%-----------------------------------------------------------
% Page Header

% From [this question](https://tex.stackexchange.com/q/726389/64441)
\usepackage{fancyhdr}
\fancyhead{}
\fancyhead[LE, RO]{\slshape\nouppercase\rightmark}
\fancyhead[LO,RE]{\selectfont\slshape\nouppercase\leftmark}
\fancyhead[LE,RO]{\thepage}
\fancyfoot{}
\setlength{\headheight}{14.49998pt}
\renewcommand\headrulewidth{0pt}
\pagestyle{fancy}
\makeatletter
\renewcommand\chaptermark[1]{\markboth{\if@mainmatter\thechapter. \fi#1}{}}
\makeatother

%-----------------------------------------------------------
% Figures

% Forcing figure floats into being at the top of the page.
% From [this answer](https://tex.stackexchange.com/a/66270/64441)
\makeatletter
\setlength{\@fptop}{0.0cm}
\makeatother

% Due to a TeX limit of only 18 outstanding floats...
% See [this answer for more info](https://tex.stackexchange.com/a/241006/64441).
\extrafloats{100}

%-----------------------------------------------------------
% Other Stuff

\raggedbottom
\frenchspacing
\usepackage{indentfirst}

%-----------------------------------------------------------
% Custom Packages

\usepackage{./goban/goban}
\usepackage{./diagrams/diagrams}
\usepackage{./utils}

%-----------------------------------------------------------
