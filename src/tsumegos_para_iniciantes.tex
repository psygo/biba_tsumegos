% TODO: Why are the triangle labels behaving so weirdly?
% TODO: Print some of the pages and decide on the font sizes and dimensions
% TODO: Change back to a number on top layout
%-----------------------------------------------------------
% Document Configs

\documentclass{book}

\usepackage[paperheight   = 148mm, % ~A6
            paperwidth    = 105mm,
            bindingoffset = 5mm,
            left          = 2.5mm,
            right         = 7mm,
            top           = 15.2mm,
            bottom        = 10.2mm,
            footskip      = 6.35mm]{geometry}

\usepackage[T1]{fontenc}
\usepackage[portuguese]{babel}
\usepackage{microtype}

\usepackage{lmodern}

\usepackage{fontspec}
% From [this comment](https://www.reddit.com/r/identifythisfont/comments/1fiahvg/comment/lngfilr/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button)
\setmainfont{Adobe Garamond Pro}

%-----------------------------------------------------------
% LaTeX Formatting

\usepackage[colorlinks  = true,
            allcolors   = black,
            pdfsubject  = {Go; Baduk; Weiqi},
            pdftitle    = {Tsumegos para Inciantes - Volume 1 - Captura e Vida ou Morte},
            pdfauthor   = {Philippe Fanaro},
            pdfkeywords = {Go; Baduk; Weiqi; Tsumegos},
            pdfproducer = {LaTeX},
            pdfcreator  = {pdflatex; bibtex},
            bookmarksnumbered]{hyperref}

\raggedbottom
\frenchspacing
\usepackage{indentfirst}

\usepackage{titlesec}
\titleformat{\chapter}[display]
            {\normalfont\huge\bfseries}
            {\thechapter}
            {20pt}
            {\huge}
\titlespacing*{\chapter}
              {0pt}
              {-25pt}
              {20pt}

\renewcommand{\chaptermark}[1]{%
  \markboth{\thechapter.\ #1}{}}
\renewcommand{\partname}{}

% From [this question](https://tex.stackexchange.com/q/726389/64441)
\usepackage{xpatch}
\AtBeginDocument{\xpatchcmd{\NR@part}{\partname\nobreakspace}{}{}{}} % Removing "Part" from part titles
\pagestyle{headings} % apply the change
\makeatother

% From [this question](https://tex.stackexchange.com/q/726389/64441)
\usepackage{fancyhdr}
\fancyhead{}
\fancyhead[LE, RO]{\slshape\nouppercase\rightmark}
\fancyhead[LO,RE]{\selectfont\slshape\nouppercase\leftmark}
\fancyhead[LE,RO]{\thepage}
\fancyfoot{}
\setlength{\headheight}{12.80502pt}
\renewcommand\headrulewidth{0pt}
\pagestyle{fancy}
\makeatletter
\renewcommand\chaptermark[1]{\markboth{\if@mainmatter\thechapter. \fi#1}{}}
\makeatother

\usepackage[nottoc,numbib]{tocbibind}
\addto\captionsportuguese{
  \renewcommand{\contentsname}{√çndice}
}

% Forcing figure floats into being at the top of the page.
% From [this answer](https://tex.stackexchange.com/a/66270/64441)
\makeatletter
\setlength{\@fptop}{0.0cm}
\makeatother

%-----------------------------------------------------------
% Custom Packages

\usepackage{./goban_segletes/goban}
\usepackage{./diagrams/diagrams}
\usepackage{./utils}

%-----------------------------------------------------------

\begin{document}
  \input{chapters/capa.tex}
  \blankpage

  \frontmatter

  \tableofcontents

  \input{chapters/prefacio.tex}

  \mainmatter
  \part{Liberdades}
    \input{chapters/captura.tex}
    \input{chapters/resgate.tex}
    \input{chapters/escadas.tex}
    \input{chapters/redes.tex}
  \part{Vida ou Morte}
    \input{chapters/Vida.tex}
    \input{chapters/Morte.tex}
\end{document}