\usepackage{bookmark}

\newcounter{problemCounter}
\setcounter{problemCounter}{0}

\newcommand\problemNumber[1]{
  \begin{tikzpicture}[baseline=(char.north)]
    \fontfamily{lmr}

    \node[draw,
          shape        = circle,
          inner sep    = 2.5pt,
          line width   = 0.025cm,
          minimum size = 0.45cm] 
      (char)
      {\normalsize \textmd{#1}};
  \end{tikzpicture}
}

\ExplSyntaxOn
\coffin_new:N \l_psygo_num_coffin
\coffin_new:N \l_psygo_txt_coffin
\newcommand\problemCaption[1]
{
  \stepcounter{problemCounter}
  \begin{figure}[t]
    \vcoffin_set:Nnn \l_psygo_num_coffin {\linewidth}
    {
      \problemNumber{\theproblemCounter}%
    }
    \vcoffin_set:Nnn \l_psygo_txt_coffin {0.7425\linewidth}
    {
      #1
    }
    \coffin_join:NnnNnnnn \l_psygo_num_coffin { r } { t}
    \l_psygo_txt_coffin { r } { t } { 0pt } { -2pt }
    \coffin_typeset:Nnnnn \l_psygo_num_coffin { B } { l } { 0pt } { 0pt }
  \end{figure}
}
\ExplSyntaxOff

\newcommand\problemDiagram[3]{
  \stepcounter{problemCounter}

  \begin{figure}[t]
    \centering

    \vspace{-0.5cm}

    \hbox{
      \begin{goban}[board dimension       = 14,
                    board size            = 19,
                    scale                 = 1,
                    outline line width    = 0.4mm,
                    horizontal clip start = 9,
                    horizontal clip end   = 19,
                    vertical clip start   = 11,
                    vertical clip end     = 19]
        \parseSgfFile{sgf/#1/#2.sgf}
      \end{goban}
    }

    % \vspace{0.675cm}
    
    \problemCaption{#3}
    
    % \begin{minipage}[t]{0.22\linewidth}
    %   \hbox{
    %     \hspace{0.4cm}
    %     \problemNumber{\theproblemCounter}
    %   }
    % \end{minipage}\hfill
    % \begin{minipage}[t]{0.7425\linewidth}
    %   % \vspace{-0.4cm}
    %   #3
    % \end{minipage}\hspace{0.5cm}
  \end{figure}
}