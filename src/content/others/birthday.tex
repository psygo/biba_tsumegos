\documentclass[12pt]{book}

% A4
\usepackage[
  paperheight   = 297mm, 
  paperwidth    = 210mm,
  bindingoffset = 10mm,
  left          = 7.5mm,
  right         = 12.5mm,
  top           = 20mm,
  bottom        = 15mm,
  footskip      = 5mm,
]{geometry}

\def\repoPath{/Users/phili/Code/Go/tsumego_workbooks/src}
\usepackage{\repoPath/config}

\newcommand\biba{%
  \begin{minipage}[c]{0.3\linewidth}
    \centering
    \Huge\textbf{BIBA}
  \end{minipage}\hfill
}

\pgfkeys{%
  /phili/birthdayProblemPage/.cd, 
    init/.store in = \problemInit,
    init           = sgf,
    end/.store in  = \problemEnd,
    end            = 1_2,
}

\newcommand\birthdayProblemPage[1][]{%
  \pgfkeys{/phili/birthdayProblemPage/.cd, #1}%
  \pgfmathtruncatemacro{\beforeEnd}{\problemEnd - 1}%
  \vspace*{0.1cm}
  \foreach \i in {\problemInit,...,\beforeEnd}{
    \problemDiagram[%
      path                      = \repoPath/sgf/birthday/problem_\i.sgf,
      problem size              = 8,
      problem text              = ,
      caption horizontal margin = -0.4cm,
      horizontal clip start     = 7,
      horizontal clip end       = 19,
      vertical clip start       = 9,
      vertical clip end         = 19,
    ]
  }%
  \biba%
  \problemDiagram[%
    path                      = \repoPath/sgf/birthday/problem_\problemEnd.sgf,
    problem size              = 8,
    problem text              = ,
    caption horizontal margin = -0.4cm,
    horizontal clip start     = 7,
    horizontal clip end       = 19,
    vertical clip start       = 9,
    vertical clip end         = 19,
  ]\hspace*{-\fill}
}

\def\sgfPath{sgf/birthday/}

\begin{document}
  \thispagestyle{empty}
  \centering
  \vfill
  \vspace*{-0.6cm}

  \Huge Shin Jinseo 9p vs Xu Jiayang 9p\\
  \vspace{0.1cm}
  \Huge (2025-06-11)

  \vspace*{-1cm}

  \begin{center}
    \hspace{0.5cm}
    \begin{goban}[board dimension       = 16.675,
                  board size            = 19,
                  scale                 = 1,
                  outline line width    = 0.55mm,
                  horizontal clip start = 1,
                  horizontal clip end   = 19,
                  vertical clip start   = 1,
                  vertical clip end     = 19]
      \parseSgfFile{\repoPath/sgf/birthday/main_problem.sgf}
    \end{goban}
  \end{center}

  \vspace*{0.1cm}

  \Huge Happy Torture, Philippe!\\
  \Huge Happy Birthday!!!\\
  \Huge Dia \& Potto

  \vfill

  \clearpage
  
  \birthdayProblemPage[%
    init = 1,
    end  = 11,
  ]%
  \birthdayProblemPage[%
    init = 12,
    end  = 22,
  ]%
  \birthdayProblemPage[%
    init = 23,
    end  = 33,
  ]%
\end{document}